---
const plans = [
  {
    name: "Free",
    description: "For individuals who want to try Safemail AI",
    price: "$0",
    period: "forever",
    features: [
      "10 email analyses per month",
      "Basic phishing detection",
      "Email report within 30 minutes",
      "Web dashboard access",
    ],
    cta: "Start Free",
    href: "#",
    highlight: false,
  },
  {
    name: "Premium",
    description: "For professionals who need reliable email security",
    price: "$30",
    period: "per month",
    features: [
      "200 email analyses per month",
      "Advanced phishing detection",
      "File attachment analysis",
      "Email report within 5 minutes",
      "Web dashboard with detailed reports",
      "Email notifications",
    ],
    cta: "Start Trial",
    href: "#",
    highlight: true,
  },
  {
    name: "Pro",
    description: "For teams that need comprehensive protection",
    price: "Custom",
    period: "",
    features: [
      "Unlimited email analyses",
      "Advanced phishing detection",
      "File attachment analysis",
      "Instant email reports",
      "Team dashboard with analytics",
      "API access",
      "Dedicated support",
    ],
    cta: "Contact Sales",
    href: "#",
    highlight: false,
  },
]
---

<div class="grid gap-8 md:grid-cols-3 max-w-5xl mx-auto">
  {plans.map((plan, index) => (
    <div
      class:list={[
        "flex flex-col p-8 rounded-2xl transition-transform duration-300 hover:scale-105",
        plan.highlight 
          ? "bg-gradient-brand text-white border-none shadow-xl relative transform-gpu" 
          : "bg-white border border-slate-100 shadow-sm"
      ]}
    >
      {plan.highlight && (
        <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-white text-primary text-xs font-medium px-3 py-1 rounded-full shadow-md">
          Most Popular
        </div>
      )}
      <div class="mb-6">
        <h3 class:list={[
          "text-xl font-medium mb-1", 
          plan.highlight ? "text-white" : "text-slate-900"
        ]}>{plan.name}</h3>
        <p class:list={[
          "text-sm",
          plan.highlight ? "text-white/80" : "text-slate-500"
        ]}>{plan.description}</p>
      </div>
      <div class="mb-6">
        <span class:list={[
          "text-3xl font-medium", 
          plan.highlight ? "text-white" : "text-slate-900"
        ]}>{plan.price}</span>
        {plan.period && <span class:list={[
          "ml-1",
          plan.highlight ? "text-white/80" : "text-slate-500"
        ]}>{plan.period}</span>}
      </div>
      <ul class="space-y-3 mb-8 flex-1">
        {plan.features.map((feature) => (
          <li class="flex items-start gap-2">
            <svg 
              xmlns="http://www.w3.org/2000/svg" 
              class:list={[
                "h-5 w-5 flex-shrink-0 mt-0.5", 
                plan.highlight ? "text-white" : "text-primary"
              ]}
              viewBox="0 0 24 24" 
              fill="none" 
              stroke="currentColor" 
              stroke-width="2" 
              stroke-linecap="round" 
              stroke-linejoin="round"
            >
              <path d="M20 6L9 17l-5-5"></path>
            </svg>
            <span class:list={[
              "text-sm",
              plan.highlight ? "text-white/90" : "text-slate-600"
            ]}>{feature}</span>
          </li>
        ))}
      </ul>
      <a
        href={plan.href}
        class:list={[
          "inline-flex items-center justify-center rounded-full py-2 px-4 font-medium transition-colors",
          plan.highlight
            ? "bg-white text-primary hover:bg-white/90"
            : "bg-white border border-slate-200 text-slate-900 hover:bg-slate-50"
        ]}
      >
        {plan.cta}
      </a>
    </div>
  ))}
</div>

<div class="stripe-wrapper mt-16 max-w-4xl mx-auto">
  <script async src="https://js.stripe.com/v3/pricing-table.js"></script>
  <stripe-pricing-table pricing-table-id="prctbl_1NgR7KKI1xxiTbPeZ3IP0Nqr"
                     publishable-key="pk_live_51MqHU4KI1xxiTbPeXZBJ23neWakogIsDq2YD2pfBrENWIilgazn0IrJyNdZzWRuKFXfUGyQZJV4cu1lrAK4mBSMk00VDKMUx62">
  </stripe-pricing-table>
</div>

<style>
  /* Hide the Stripe pricing table on larger screens where we show our custom table */
  @media (min-width: 768px) {
    .stripe-wrapper {
      display: none;
    }
  }
  
  /* Only show the Stripe pricing table on mobile */
  @media (max-width: 767px) {
    .grid {
      display: none;
    }
  }
</style>